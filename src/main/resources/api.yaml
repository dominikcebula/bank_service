swagger: "2.0"
info:
  description: "Simple Bank Service Rest API"
  version: "1.0.0"
  title: "Bank Service Rest API"
  contact:
    email: "dominikcebula@gmail.com"
paths:
  /:
    get:
      summary: "Index Action showing that service is up"
      responses:
        200:
          description: "Service is up"
          schema:
            $ref: '#/definitions/HealthCheckResponse'

  /accounts/list:
    get:
      summary: "List all accounts in the system"
      responses:
        200:
          description: "Accounts list"
          schema:
            $ref: '#/definitions/ListAccountsResponse'

  /accounts/create:
    post:
      summary: "Create new account"
      parameters:
        - name: body
          in: body
          required: true
          schema:
            $ref: '#/definitions/AccountCreateRequest'
      responses:
        200:
          description: "Created Account details"
          schema:
            $ref: '#/definitions/AccountCreateResponse'

  /transfer:
    post:
      summary: "Transfer money between accounts"
      parameters:
        - name: body
          in: body
          required: true
          schema:
            $ref: '#/definitions/TransferMoneyRequest'
      responses:
        200:
          description: "Transferred money operation result"
          schema:
            $ref: '#/definitions/TransferMoneyResponse'

definitions:
  Money:
    type: "number"
    format: "float"
  AccountId:
    type: "string"
  Account:
    type: "object"
    required:
      - accountId
      - balance
    properties:
      accountId:
        $ref: '#/definitions/AccountId'
      balance:
        $ref: '#/definitions/Money'
  Accounts:
    type: object
    required:
      - accounts
      - totalDeposit
    properties:
      accounts:
        type: "array"
        items:
          $ref: '#/definitions/Account'
      totalDeposit:
        $ref: '#/definitions/Money'

  HealthCheckResponse:
    type: "object"
    required:
      - status
    properties:
      status:
        type: "string"
        enum:
          - "up"

  ListAccountsResponse:
    type: object
    required:
      - status
      - accounts
    properties:
      status:
        $ref: '#/definitions/ApiResponse'
      accounts:
        $ref: '#/definitions/Accounts'

  AccountCreateRequest:
    type: object
    required:
      - initialDeposit
    properties:
      initialDeposit:
        $ref: '#/definitions/Money'
  AccountCreateResponse:
    type: "object"
    required:
      - status
      - account
    properties:
      status:
        $ref: '#/definitions/ApiResponse'
      account:
        $ref: '#/definitions/Account'

  TransferMoneyRequest:
    type: "object"
    required:
      - from
      - to
      - amount
    properties:
      from:
        $ref: '#/definitions/AccountId'
      to:
        $ref: '#/definitions/AccountId'
      amount:
        $ref: '#/definitions/Money'
  TransferMoneyResponse:
    required:
      - status
      - from
      - to
      - amount
    properties:
      status:
        $ref: '#/definitions/ApiResponse'
      from:
        $ref: '#/definitions/AccountId'
      to:
        $ref: '#/definitions/AccountId'
      amount:
        $ref: '#/definitions/Money'

  ApiCode:
    type: "string"
    enum:
      - FAILED
      - ACCOUNT_CREATED
      - ACCOUNTS_LISTED
      - MONEY_TRANSFERED
  ApiResponse:
    type: "object"
    required:
      - code
    properties:
      code:
        $ref: '#/definitions/ApiCode'
  ApiErrorResponse:
    required:
      - status
      - message
    properties:
      status:
        $ref: '#/definitions/ApiResponse'
      message:
        type: "string"
